<!DOCTYPE html> <html lang=en ><meta charset=UTF-8 /><meta name=viewport  content="width=device-width, initial-scale=1.0"/><title>Foreign model interface · Jaynes.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel=stylesheet  type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel=stylesheet  type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel=stylesheet  type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel=stylesheet  type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel=stylesheet  type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class=docs-theme-link  rel=stylesheet  type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name=documenter-dark /><link class=docs-theme-link  rel=stylesheet  type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name=documenter-light  data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel=icon  type="image/x-icon"/><div id=documenter ><nav class=docs-sidebar ><a class=docs-logo  href="../../"><img src="../../assets/logo.png" alt="Jaynes.jl logo"/></a><div class=docs-package-name ><span class=docs-autofit >Jaynes.jl</span></div><form class=docs-search  action="../../search/"><input class=docs-search-query  id=documenter-search-query  name=q  type=text  placeholder="Search docs"/></form><ul class=docs-menu ><li><a class=tocitem  href="../../">Introduction</a><li><a class=tocitem  href="../sites/">Traces, choices, and call sites</a><li><a class=tocitem  href="../contexts/">Execution contexts</a><li><a class=tocitem  href="../selection_interface/">Selection interface</a><li><span class=tocitem >Inference</span><ul><li><a class=tocitem  href="../../inference/is/">Importance sampling</a><li><a class=tocitem  href="../../inference/mh/">Metropolis-Hastings</a><li><a class=tocitem  href="../../inference/hmc/">Hamiltonian Monte Carlo</a><li><a class=tocitem  href="../../inference/pf/">Particle filtering</a><li><a class=tocitem  href="../../inference/vi/">Automatic differentiation variational inference</a></ul><li class=is-active ><a class=tocitem  href>Foreign model interface</a><ul class=internal ><li><a class=tocitem  href="#Black-box-extensions"><span>Black-box extensions</span></a><li><a class=tocitem  href="#Foreign-models"><span>Foreign models</span></a></ul><li><a class=tocitem  href="../diff_prog/">Differentiable programming</a></ul><div class="docs-version-selector field has-addons"><div class=control ><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id=documenter-version-selector ></select></div></div></div></nav><div class=docs-main ><header class=docs-navbar ><nav class=breadcrumb ><ul class=is-hidden-mobile ><li class=is-active ><a href>Foreign model interface</a></ul><ul class=is-hidden-tablet ><li class=is-active ><a href>Foreign model interface</a></ul></nav><div class=docs-right ><a class=docs-edit-link  href="https://github.com/femtomc/Jaynes.jl/blob/master/src/library_api/fmi.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id=documenter-settings-button  href="#" title=Settings ></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id=documenter-sidebar-button  href="#"></a></div></header><article class=content  id=documenter-page ><p>Due to the design and implementation as an IR metaprogramming tool, Jaynes sits at a slightly privileged place in the probabilistic programming ecosystem, in the sense that many of the other languages which users are likely to use require the usage of macros to setup code in a way which allows the necessary state to be inserted for probabilistic programming functionality.</p><p>Jaynes sees all the code after macro expansion is completed, which allows Jaynes to introspect function call sites after state has been inserted by other libraries. This allows the possibility for Jaynes to construct special call sites to represent calls into other probabilistic programming libraries. These interfaces are a work in progress, but Jaynes should theoretically provide a <em>lingua franca</em> for programs expressed in different probabilistic programming systems to communicate in a natural way, due to the nature of the context-oriented programming style facilitated by the system.</p><h2 id=Black-box-extensions ><a class=docs-heading-anchor  href="#Black-box-extensions">Black-box extensions</a><a id=Black-box-extensions-1 ></a><a class=docs-heading-anchor-permalink  href="#Black-box-extensions" title=Permalink ></a></h2><article class=docstring ><header><a class=docstring-binding  id=Jaynes.primitive  href="#Jaynes.primitive"><code>Jaynes.primitive</code></a> — <span class=docstring-category >Function</span></header><section><div><pre><code class=language-julia >@primitive function logpdf(fn::typeof(foo), args, foo_ret)
    ...
end</code></pre><p><code>@primitive</code> is a convenience metaprogramming construct which derives contextual dispatch definitions for functions which you&#39;d like the tracer to &quot;summarize&quot; to a single site. This is one mechanism which gives the user more control over the structure of the choice map structure in their programs.</p><p>Example:</p><pre><code class=language-julia >geo(p::Float64) = rand(:flip, Bernoulli(p)) ? 1 : 1 + rand(:geo, geo, p)

# Define as primitive.
@primitive function logpdf(fn::typeof(geo), p, count)
    return Distributions.logpdf(Geometric(p), count)
end

function foo()
    ret = rand(:geo, geo, 0.3)
    ret
end</code></pre><p>The above program would summarize the trace into a single choice site for <code>:geo</code>, as if <code>geo</code> was a primitive distribution.</p><pre><code class=language-julia >  __________________________________

               Addresses

 geo : 42
  __________________________________</code></pre></div><a class=docs-sourcelink  target=_blank  href="https://github.com/femtomc/Jaynes.jl/blob/00e93c91b49bb124402e8cc9c58c66ccbdf30722/src/language_extensions.jl#L11-L46">source</a></section></article><h2 id=Foreign-models ><a class=docs-heading-anchor  href="#Foreign-models">Foreign models</a><a id=Foreign-models-1 ></a><a class=docs-heading-anchor-permalink  href="#Foreign-models" title=Permalink ></a></h2><div class="admonition is-warning"><header class=admonition-header >Missing docstring.</header><div class=admonition-body ><p>Missing docstring for <code>foreign</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning"><header class=admonition-header >Missing docstring.</header><div class=admonition-body ><p>Missing docstring for <code>load_soss_fmi</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning"><header class=admonition-header >Missing docstring.</header><div class=admonition-body ><p>Missing docstring for <code>load_gen_fmi</code>. Check Documenter&#39;s build log for details.</p></div></div></article><nav class=docs-footer ><a class=docs-footer-prevpage  href="../../inference/vi/">« Automatic differentiation variational inference</a><a class=docs-footer-nextpage  href="../diff_prog/">Differentiable programming »</a><div class=flexbox-break ></div><p class=footer-message >Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class=modal  id=documenter-settings ><div class=modal-background ></div><div class=modal-card ><header class=modal-card-head ><p class=modal-card-title >Settings</p><button class=delete ></button></header><section class=modal-card-body ><p><label class=label >Theme</label><div class=select ><select id=documenter-themepicker ><option value=documenter-light >documenter-light<option value=documenter-dark >documenter-dark</select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class=colophon-date  title="Thursday 26 November 2020 11:11">Thursday 26 November 2020</span>. Using Julia version 1.5.2.</p></section><footer class=modal-card-foot ></footer></div></div></div>